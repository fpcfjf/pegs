# **铸造和赎回**

*详细说明铸造和赎回PUSD的过程*


# 铸造

所有的PUSD代币都是可以相互替代的代币，并且无论以何种抵押率铸造的PUSD都具有相同比例的抵押物。该方程式系统地描述了铸造Pegs cash协议的功能：

<img src="http://latex.codecogs.com/svg.latex?F&space;=&space;\overbrace{\left&space;(&space;Y*P_y&space;\right&space;)}^{collateral\;value}&plus;\overbrace{\left&space;(&space;Z*P_z&space;\right&space;)}^{PEGS\;value}\hspace{222cm}" title="http://latex.codecogs.com/svg.latex?F = \overbrace{\left ( Y*P_y \right )}^{collateral\;value}+\overbrace{\left ( Z*P_z \right )}^{PEGS\;value}" />

<img src="http://latex.codecogs.com/svg.latex?\left&space;(&space;1-C_r\right&space;)\left&space;(Y*P_y\right&space;)=C_r\left&space;(&space;Z*P_z&space;\right&space;)\hspace{222cm}" title="http://latex.codecogs.com/svg.latex?\left ( 1-C_r\right )\left (Y*P_y\right )=C_r\left ( Z*P_z \right )" />

F 铸造的 PUSD 的数量

C_r 抵押率

Y 输入到系统的抵押资产的数量

P_y 单位抵押资产 $Y$ 的USD价格

Z 燃烧掉的PEGS的数量

P_z 单位PEGS的USD价格

**例子1: 以抵押率100%来铸造价值200 USDC ($1/USDC price)的PUSD** 

我们可以先找出当抵押率为1.00时，铸造的PUSD价值为 `200 USDC` (`$1/USDC`) ，所需的PEGS的数量：

<img src="http://latex.codecogs.com/svg.latex?\left&space;(1-1.00\right&space;)\left&space;(&space;100*1.00&space;\right&space;)=1.00\left&space;(&space;Z*P_z&space;\right&space;)" title="http://latex.codecogs.com/svg.latex?\left (1-1.00\right )\left ( 100*1.00 \right )=1.00\left ( Z*P_z \right )" />

<img src="http://latex.codecogs.com/svg.latex?0=\left&space;(Z*P_z&space;\right&space;)" title="http://latex.codecogs.com/svg.latex?0=\left (Z*P_z \right )" />

因此，当协议抵押率为100％（完全抵押）时，无需PEGS即可铸造PUSD。接下来，我们来计算质押200USDC会得到多少PUSD :

<img src="http://latex.codecogs.com/svg.latex?F=\left&space;(&space;200*1.00&space;\right&space;)&plus;\left&space;(&space;0&space;\right&space;)" title="http://latex.codecogs.com/svg.latex?F=\left ( 200*1.00 \right )+\left ( 0 \right )" />

<img src="http://latex.codecogs.com/svg.latex?F=200" title="http://latex.codecogs.com/svg.latex?F=200" />

因此，这种情况下我们一共铸造了200个PUSD。请注意，当比率为100%时，PUSD的全部价值都来自于抵押物。因为等式的第二部分Z 和 P_z的乘积为0，所以所有燃烧的PEGS都将返回给用户。

**例子2:以80％的抵押率铸造PUSD，使用120 USDC（\$ 1 / USDC）和PEGS价格\$ 2 / PEGS。**

首先，我们需要计算多少PEGS才能匹配相应数量的USDC：

<img src="http://latex.codecogs.com/svg.latex?\left&space;(&space;1-0.8\right&space;)\left&space;(120*1.00&space;\right&space;)=0.8\left&space;(&space;Z*2.00&space;\right&space;)" title="http://latex.codecogs.com/svg.latex?\left ( 1-0.8\right )\left (120*1.00 \right )=0.8\left ( Z*2.00 \right )" />

<img src="http://latex.codecogs.com/svg.latex?Z=15" title="http://latex.codecogs.com/svg.latex?Z=15" />

因此，在这种情况下，我们需要在15 USD PEGS和120 USDC的抵押物。接下来，我们计算将得到多少PUSD：

<img src="http://latex.codecogs.com/svg.latex?F=\left&space;(&space;120*1.00&space;\right&space;)&plus;\left(&space;15*2.00\right&space;)" title="http://latex.codecogs.com/svg.latex?F=\left ( 120*1.00 \right )+\left( 15*2.00\right )" />

<img src="http://latex.codecogs.com/svg.latex?F=150" title="http://latex.codecogs.com/svg.latex?F=150" />

在这种情况下我们一共可以铸造150个PUSD。120个PUSD由USDC作为抵押品的价值提供支持，30个PUSD由PEGS支持。价值30的PUSD的PEGS会被燃烧并从流通中移除。

**例子3: 以220USDC的抵押物（\$0.9995 / USDC）和价格为\$ 3.50 的PEGS主在PUSD，抵押品比率为50％**

首先，我们首先计算需要的PEGS数量。

<img src="http://latex.codecogs.com/svg.latex?\left&space;(1-0.50\right&space;)\left&space;(&space;220*0.9995&space;\right&space;)=0.50(Z*3.50)" title="http://latex.codecogs.com/svg.latex?\left (1-0.50\right )\left ( 220*0.9995 \right )=0.50(Z*3.50)" />

<img src="http://latex.codecogs.com/svg.latex?Z=62.54" title="http://latex.codecogs.com/svg.latex?Z=62.54" />

接下来，我们计算将得到多少PUSD。

<img src="http://latex.codecogs.com/svg.latex?F=\left&space;(&space;220*0.9995&space;\right&space;)&plus;\left&space;(&space;62.54*3.50&space;\right&space;)" title="http://latex.codecogs.com/svg.latex?F=\left ( 220*0.9995 \right )+\left ( 62.54*3.50 \right )" />

<img src="http://latex.codecogs.com/svg.latex?F=437.78" title="http://latex.codecogs.com/svg.latex?F=437.78" />

在这种情况下我们可以铸造437.78 PUSD 。按比例，新铸造的PUSD的一半由USDC的价值作为抵押，而其余50％的PUSD没有任何抵押。62.54个PEGS被从循环中移除，其价值为新铸造的PUSD的一半。

如果没有足够的PEGS与抵押品一起进入铸造功能，则交易将会失败并显示错误。

# 赎回

为更容易的算出赎回的PUSD的价值，重新排列之前的方程式：

<img src="http://latex.codecogs.com/svg.latex?Y&space;=&space;\frac{F*(C_r)}{P_y}\hspace{163cm}" title="http://latex.codecogs.com/svg.latex?Y = \frac{F*(C_r)}{P_y}\hspace{163cm}" />

<img src="http://latex.codecogs.com/svg.latex?Z&space;=&space;\frac{F*(1-C_r)}{P_z}\hspace{163cm}" title="http://latex.codecogs.com/svg.latex?Z = \frac{F*(1-C_r)}{P_z}\hspace{163cm}" />

F   赎回PUSD的单位

C_r 抵押率 

Y  返还给用户的抵押物的数量

P_y 抵押物 $Y$的USD单位价格

Z   铸造给用户的PEGS数量

P_z PEGS的USD单位价格

**例子4: 以65％的抵押率赎回170 PUSD。预言机的价格分别为 1.00 / USDC和$ 3.75/PEGS。**

<img src="http://latex.codecogs.com/svg.latex?Y&space;=&space;\frac{170*(0.65)}{1.00}\hspace{163cm}" title="http://latex.codecogs.com/svg.latex?Y = \frac{170*(0.65)}{1.00}\hspace{163cm}" />

<img src="http://latex.codecogs.com/svg.latex?Y&space;=&space;\frac{170*(0.35)}{3.75}\hspace{163cm}" title="http://latex.codecogs.com/svg.latex?Y = \frac{170*(0.35)}{3.75}\hspace{163cm}" />

因此, Y=110.5$ and Z=15.867$

用户赎回170 PUSD，用户将获得110.5 USDC的抵押物，和15.867个新铸造的PEGS 。

# 铸造和赎回费用

这些例子没有计入铸造和赎回费用，其设置为0.3％，铸币税和赎回税的30%会作为Buyback的资金储备，70%将以PUSD的形式流入分红池。PEGS质押到分红池可以分红，分红每天UTC+0发放。